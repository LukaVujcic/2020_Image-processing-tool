#:kivy 1.10.1

<IPC>:
    selection_tool:selection_tool
    resize_tool:resize_tool
    crop_tool:crop_tool
    laso_tool:laso_tool
    img_id:img_id

    GridLayout:
        cols:4
        size_hint: 0.4,0.05
        pos_hint: {"x":0,"top":1}
        Button:
            id:file
            text: "New"
        Button:
            id:tools
            text: "Open"
            on_release: root.open_file()
        Button:
            id:image
            text: "Save"
        Button:
            id:image
            text: "Export"

    
    GridLayout:
        cols: 4
        size_hint: 0.3,0.3
        pos_hint:{"x":0,"top":0.9}
        Button:
            id:selection_tool
            background_normal: "./assets/SelectionRectangle-Icon.png"
            border:0,0,0,0
        Button:
            id:resize_tool
            background_normal: "./assets/TransformScale-Icon.png"
            border:0,0,0,0
        Button:
            id:crop_tool
            background_normal: "./assets/SelectionScissors-Icon.png"
            border:0,0,0,0
        Button:
            id: text_tool
            background_normal: "./assets/TextTool-Icon.png"
            border:0,0,0,0

        Button:
            id:pen_tool
            background_normal: "./assets/BrushPencil-Icon.png"
            border:0,0,0,0
        Button:
            id:brush_tool
            background_normal: "./assets/BrushPaintbrush-Icon.png"
            border:0,0,0,0
        Button:
            id:eraser_tool
            background_normal: "./assets/Eraser-Icon.png"
            border:0,0,0,0
        Button:
            id:laso_tool
            background_normal: "./assets/SelectionLasso-Icon.png"
            border:0,0,0,0


    Image:
        id:img_id
        size_hint:0.7,0.7
        pos_hint: {"x":0.3,"top":0.8}
        #source: "1.jpeg"

    ColorPicker:
        color:0,0,0,1
        size_hint:0.3,0.4
        pos_hint: {"left":1,"bot":1}
    
    FloatLayout:
        size_hint:0.3,0.1
        pos_hint: {"x":0,"top":0.5}
        Label:
            pos_hint: {"x":-0.4,"top":1}
            text:"label2"
            color:1,1,1,1
        Slider:
            pos_hint: {"right":1,"top":1}
            size_hint:0.75,1
            min:0
            max:100

    FloatLayout:
        size_hint:0.3,0.1
        pos_hint: {"x":0,"top":0.55}
        Label:
            pos_hint: {"x":-0.4,"top":1}
            text:"label1"
            color:1,1,1,1
        Slider:
            pos_hint: {"right":1,"top":1}
            size_hint:0.75,1
            min:0
            max:100


<CustomPopup>:

    fc:fc
    txt_input:txt_input

    title: "Export/Open:"
    size_hint:0.7,0.7
    pos_hint:{"x":0.15,"y":0.15}
    auto_dismiss: True
    FloatLayout:
        size_hint:1,1
        pos_hint:{"x":0,"y":0}
        canvas.before: 
            Color: 
                rgba: 0,0,0.05,0.98
            Rectangle: 
                pos: self.pos
                size: self.size 

        Button:
            size_hint:0.2,0.1
            pos_hint:{"x":0.1,"y":0.02}
            text:"Export"
            on_release:root.save_file()
        
        Button:
            size_hint:0.2,0.1
            pos_hint:{"x":0.4,"y":0.02}
            text:"Open"
            on_release:root.open_image()

        Button:
            text:"Cancel"
            size_hint:0.2,0.1
            pos_hint:{"x":0.7,"y":0.02}
            on_release:root.dismiss()

        TextInput:
            id: txt_input
            size_hint:0.8,0.1
            pos_hint:{"x":0.1,"y":0.15}
            multiline:False

        FileChooser:
            id:fc
            size_hint:0.8,0.6
            pos_hint:{"x":0.1,"y":0.3}
            path:"./"
            on_touch_up:root.update_text_input()
            FileChooserListLayout:
                canvas.before: 
                    Color: 
                        rgba: 0,0.05,0.1,0.7
                    Rectangle: 
                        pos: self.pos 
                        size: self.size